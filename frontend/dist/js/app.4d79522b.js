(function(e){function t(t){for(var n,c,a=t[0],i=t[1],d=t[2],l=0,u=[];l<a.length;l++)c=a[l],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&u.push(r[c][0]),r[c]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);p&&p(t);while(u.length)u.shift()();return s.push.apply(s,d||[]),o()}function o(){for(var e,t=0;t<s.length;t++){for(var o=s[t],n=!0,c=1;c<o.length;c++){var a=o[c];0!==r[a]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},c={app:0},r={app:0},s=[];function a(e){return i.p+"js/"+({UploadPhoto:"UploadPhoto","admin-usercreate":"admin-usercreate","admin/allPhotos":"admin/allPhotos","password-recovery":"password-recovery","protected/Photo List":"protected/Photo List","protected/Slideshow":"protected/Slideshow"}[e]||e)+"."+{UploadPhoto:"220a13ba","admin-usercreate":"b6c91987","admin/allPhotos":"b1f6bd51","password-recovery":"d845e11b","protected/Photo List":"0e1b2082","protected/Slideshow":"6ff4a3c2"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.e=function(e){var t=[],o={UploadPhoto:1,"admin/allPhotos":1,"protected/Photo List":1,"protected/Slideshow":1};c[e]?t.push(c[e]):0!==c[e]&&o[e]&&t.push(c[e]=new Promise((function(t,o){for(var n="css/"+({UploadPhoto:"UploadPhoto","admin-usercreate":"admin-usercreate","admin/allPhotos":"admin/allPhotos","password-recovery":"password-recovery","protected/Photo List":"protected/Photo List","protected/Slideshow":"protected/Slideshow"}[e]||e)+"."+{UploadPhoto:"8a8b9674","admin-usercreate":"31d6cfe0","admin/allPhotos":"036d8188","password-recovery":"31d6cfe0","protected/Photo List":"c3347e4b","protected/Slideshow":"070d8a20"}[e]+".css",r=i.p+n,s=document.getElementsByTagName("link"),a=0;a<s.length;a++){var d=s[a],l=d.getAttribute("data-href")||d.getAttribute("href");if("stylesheet"===d.rel&&(l===n||l===r))return t()}var u=document.getElementsByTagName("style");for(a=0;a<u.length;a++){d=u[a],l=d.getAttribute("data-href");if(l===n||l===r)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||r,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete c[e],p.parentNode.removeChild(p),o(s)},p.href=r;var b=document.getElementsByTagName("head")[0];b.appendChild(p)})).then((function(){c[e]=0})));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,o){n=r[e]=[t,o]}));t.push(n[2]=s);var d,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=a(e);var u=new Error;d=function(t){l.onerror=l.onload=null,clearTimeout(p);var o=r[e];if(0!==o){if(o){var n=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+n+": "+c+")",u.name="ChunkLoadError",u.type=n,u.request=c,o[1](u)}r[e]=void 0}};var p=setTimeout((function(){d({type:"timeout",target:l})}),12e4);l.onerror=l.onload=d,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var d=window["webpackJsonp"]=window["webpackJsonp"]||[],l=d.push.bind(d);d.push=t,d=d.slice();for(var u=0;u<d.length;u++)t(d[u]);var p=l;s.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"1a20":function(e,t,o){},"1e6f":function(e,t,o){"use strict";o("8493")},"2a7d":function(e,t,o){"use strict";var n=o("7a23");const c=["disabled"],r=Object(n["i"])("Button"),s={class:"confirmButtonWrapper"};function a(e,t,o,a,i,d){const l=Object(n["C"])("centeredDiv");return Object(n["u"])(),Object(n["g"])(n["a"],null,[Object(n["h"])("button",{onClick:t[0]||(t[0]=Object(n["M"])((...e)=>d._onClick&&d._onClick(...e),["prevent"])),class:Object(n["p"])(["btn",[o.type&&"btn-"+o.type,o.size&&"btn-"+o.size]]),style:Object(n["q"])(o.style),disabled:o.disabled},[Object(n["B"])(e.$slots,"default",{},()=>[r],!0)],14,c),i.showConfirmButton?(Object(n["u"])(),Object(n["e"])(l,{key:0},{default:Object(n["J"])(()=>[Object(n["h"])("div",s,[Object(n["h"])("button",{class:"btn btn-success",onClick:t[1]||(t[1]=Object(n["M"])((...e)=>d.confirmClick&&d.confirmClick(...e),["prevent"]))},Object(n["E"])(o.confirmText),1),Object(n["h"])("button",{class:"btn btn-warning",onClick:t[2]||(t[2]=Object(n["M"])((...e)=>d.cancelClick&&d.cancelClick(...e),["prevent"]))},Object(n["E"])(o.cancelText),1)])]),_:1})):Object(n["f"])("",!0)],64)}var i=o("59fb"),d={components:{centeredDiv:i["a"]},props:{style:{type:Object},onClick:{type:Function,required:!0},disabled:{type:Boolean,default:!1},confirmText:{type:String,default:"confirm"},cancelText:{type:String,default:"cancel"},type:{type:String},size:{type:String},needsConfirmation:Boolean},data(){return{showConfirmButton:!1}},methods:{_onClick(){this.needsConfirmation?this.showConfirmButton=!0:this.onClick()},confirmClick(){this.onClick()},cancelClick(){this.showConfirmButton=!1}}},l=(o("b963"),o("6b0d")),u=o.n(l);const p=u()(d,[["render",a],["__scopeId","data-v-74d21465"]]);t["a"]=p},"3ebb":function(e,t,o){"use strict";o("4fe7")},"4ec3":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return i}));var n=o("bc3a"),c=o.n(n),r=o("8c89");const s=c.a.create({baseURL:r["a"],timeout:5e3});function a(e){return{headers:{Authorization:"Bearer "+e}}}const i={async logInGetToken(e,t){const o=new URLSearchParams;return o.append("username",e),o.append("password",t),s.post("/login/access-token",o)},async getMe(e){return s.get("/users/me",a(e))},async updateMe(e,t){return s.put("/users/me",t,a(e))},async updatePasswordMe(e,t){return s.put("/users/me/password",t,a(e))},async signUp(e){return s.post("/users/signup",e)},async getUsers(e){return s.get("/users",a(e))},async getUser(e,t){return s.get("/users/"+t,a(e))},async createUser(e,t){return s.post("/users",t,a(e))},async updateUser(e,t,o){return s.put("/users/"+t,o,a(e))},async deleteUser(e,t){return s.delete("/users/"+t,a(e))},async passwordRecovery(e){return s.post("/password-recovery/"+e)},async resetPassword(e){return s.post("/reset-password",e)},async uploadPhoto(e,t){let o=new FormData;return o.append("photo",e,e.name),o.append("title",t),s.post("/upload",o,{headers:{"Content-Type":"multipart/form-data"}})},async getAllPhotos(e){return s.get("/photos",a(e))},async deletePhoto(e,t){return s.delete("/photos/"+t,a(e))},async rotatePhoto(e,t){return s.get("/photos/"+t+"/rotate",a(e))}}},"4fe7":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);var n=o("7a23");const c=Object(n["h"])("link",{rel:"icon",href:"data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üíê</text></svg>"},null,-1),r=Object(n["h"])("div",{class:"credits"},[Object(n["i"])(" by "),Object(n["h"])("a",{href:"https://luona.dev"},"[luona]"),Object(n["i"])(" development ")],-1);function s(e,t,o,s,a,i){const d=Object(n["C"])("router-view"),l=Object(n["C"])("NotificationsManager");return Object(n["u"])(),Object(n["g"])(n["a"],null,[c,Object(n["j"])(d),Object(n["j"])(l),r],64)}const a=e=>(Object(n["x"])("data-v-4c26bc07"),e=e(),Object(n["v"])(),e),i={key:0,class:"notification_container"},d={key:0},l=["onClick"],u=a(()=>Object(n["h"])("small",null,"x",-1)),p=[u];function b(e,t,o,c,r,s){return Object(n["u"])(),Object(n["g"])("div",null,[r.currentNotifications.length>0?(Object(n["u"])(),Object(n["g"])("div",i,[(Object(n["u"])(!0),Object(n["g"])(n["a"],null,Object(n["A"])(r.currentNotifications,e=>(Object(n["u"])(),Object(n["g"])("div",{key:e.timestamp,class:Object(n["p"])([e.color+"_color","single_noticiation"])},[Object(n["h"])("span",null,Object(n["E"])(e.content),1),e.taskId?(Object(n["u"])(),Object(n["g"])("span",d,Object(n["E"])(e.color),1)):Object(n["f"])("",!0),Object(n["h"])("span",{class:"close_button",onClick:t=>s.removeNotification(e)},p,8,l)],2))),128))])):Object(n["f"])("",!0)])}o("caad");var m={data(){return{show:!1,currentNotifications:new Array}},methods:{removeNotification(e){this.$store.commit("removeNotification",e),this.currentNotifications=this.currentNotifications.filter(t=>t!==e)}},computed:{latestNotification(){return this.$store.getters.latestNotification}},watch:{latestNotification(e){if(e&&!this.currentNotifications.includes(e)){this.currentNotifications.push(e);let t=e.showTime?e.showTime:4e3,o=this;setTimeout((function(){o.removeNotification(e)}),t)}}}},f=(o("e66e"),o("6b0d")),h=o.n(f);const g=h()(m,[["render",b],["__scopeId","data-v-4c26bc07"]]);var j=g,O={components:{NotificationsManager:j},created(){this.$store.dispatch("checkLoggedIn")},mounted(){document.title="Merle & Jan"}};o("eb6b");const v=h()(O,[["render",s]]);var w=v,y=o("6605");function k(e,t,o,c,r,s){const a=Object(n["C"])("router-view");return Object(n["u"])(),Object(n["e"])(a)}var P=o("4ec3"),C=o("5502");const L=()=>localStorage.getItem("token"),_=e=>localStorage.setItem("token",e),N=()=>localStorage.removeItem("token"),U=Object(C["a"])({state:{token:"",isLoggedIn:!1,userProfile:null,notifications:new Array,backendTasks:new Array},getters:{hasAdminAccess(e){return e.userProfile&&e.userProfile.is_superuser&&e.userProfile.is_active},isLoggedIn(e){return e.userProfile&&e.isLoggedIn},latestNotification(e){if(e.notifications.length>0)return e.notifications[0]}},mutations:{setToken(e,t){e.token=t},setLoggedIn(e,t){e.isLoggedIn=t},setUserProfile(e,t){e.userProfile=t},addNotification(e,t){t.timestamp=Date.now(),e.notifications.unshift(t)},removeNotification(e,t){e.notifications=e.notifications.filter(e=>e!==t)}},actions:{async logIn(e,t){try{const o=await P["a"].logInGetToken(t.username,t.password),n=o.data.access_token;n?(_(n),e.commit("setToken",n),e.commit("setLoggedIn",!0),await e.dispatch("getUserProfile"),e.commit("addNotification",{content:"Eingeloggt.",color:"success"}),me.push({name:"Home"})):await e.dispatch("logOut")}catch(o){e.commit("addNotification",{content:o.response.data.detail,color:"warning"}),N(),e.commit("setToken",""),e.commit("setLoggedIn",!1)}},async logOut(e){N(),e.commit("setUserProfile",null),e.commit("setToken",""),e.commit("setLoggedIn",!1),e.commit("addNotification",{content:"Ausgeloggt",color:"success"}),me.push({name:"Home"})},async checkLoggedIn(e){if(!e.state.isLoggedIn){let o=e.state.token;if(!o){const t=L();t&&(e.commit("setToken",t),o=t)}if(o)try{e.commit("setLoggedIn",!0),e.commit("setUserProfile",{email:"...loading",is_superuser:!0,is_active:!0}),await e.dispatch("getUserProfile")}catch(t){N(),e.commit("setToken",""),e.commit("setLoggedIn",!1)}}},async getUserProfile(e){try{const t=await P["a"].getMe(e.state.token);e.commit("setUserProfile",t.data)}catch(t){e.commit("addNotification",{content:"Couldn't fetch your profile, please login again.",color:"warning"})}},async updateUserProfile(e,t){try{const o=await P["a"].updateMe(e.state.token,t);e.commit("addNotification",{content:"Profile successfully updated",color:"success"}),e.commit("setUserProfile",o.data),me.push("/profile/view")}catch(o){o.response.data.detail.map(t=>{e.commit("addNotification",{content:t.msg,color:"error"})})}},async changeUserPassword(e,t){try{await P["a"].updatePasswordMe(e.state.token,t),e.commit("addNotification",{content:"Password updated.",color:"success"}),me.push("/profile/view")}catch(o){e.commit("addNotification",{content:"Couldn't update your password",color:"warning"})}},async passwordRecovery(e,t){try{P["a"].passwordRecovery(t),e.commit("addNotification",{content:"Password recovery email sent",color:"success"})}catch(o){e.commit("addNotification",{content:"Couldn't send recovery email",color:"warning"})}},async resetPassword(e,t){try{P["a"].resetPassword(t,t),e.commit("addNotification",{content:"Password successfully reset",color:"success"}),me.push({name:"Login"})}catch(o){e.commit("addNotification",{color:"error",content:"Error resetting password"})}}},modules:{}});var I=U;const S=async(e,t,o)=>{I.getters.isLoggedIn?o():o({name:"Login"})};var T={beforeRouteEnter(e,t,o){S(e,t,o)},beforeRouteUpdate(e,t,o){S(e,t,o)}};const x=h()(T,[["render",k]]);var A=x;function E(e,t,o,c,r,s){const a=Object(n["C"])("router-view");return Object(n["u"])(),Object(n["e"])(a)}const M=async(e,t,o)=>{I.getters.hasAdminAccess?o():o({name:"Home"})};var $={beforeRouteEnter(e,t,o){M(e,t,o)},beforeRouteUpdate(e,t,o){M(e,t,o)}};const B=h()($,[["render",E]]);var J=B;const D={class:"content"},R=Object(n["i"])("Login");function H(e,t,o,c,r,s){const a=Object(n["C"])("btn"),i=Object(n["C"])("centeredDiv");return Object(n["u"])(),Object(n["e"])(i,null,{default:Object(n["J"])(()=>[Object(n["h"])("form",D,[Object(n["K"])(Object(n["h"])("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>r.email=e),name:"login",label:"Login",type:"text",placeholder:"Email"},null,512),[[n["H"],r.email]]),Object(n["K"])(Object(n["h"])("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>r.password=e),name:"password",label:"Password",type:"password",placeholder:"Password"},null,512),[[n["H"],r.password]]),Object(n["j"])(a,{type:"success",disabled:r.working,onClick:s.submit},{default:Object(n["J"])(()=>[R]),_:1},8,["disabled","onClick"])])]),_:1})}var z=o("59fb"),F=o("2a7d"),q={name:"Login",components:{btn:F["a"],centeredDiv:z["a"]},data(){return{email:null,password:null,working:!1}},methods:{submit(){this.working=!0,this.$store.dispatch("logIn",{username:this.email,password:this.password}),this.working=!1}}};o("1e6f");const K=h()(q,[["render",H],["__scopeId","data-v-b2a15898"]]);var W=K;const G=e=>(Object(n["x"])("data-v-5b25c5d1"),e=e(),Object(n["v"])(),e),V={class:"content"},Z={key:0,class:"abschnitt"},Q=Object(n["i"])("Log Out"),X={key:1,class:"abschnitt"},Y=G(()=>Object(n["h"])("span",null,"Nicht eingeloggt",-1)),ee=Object(n["i"])("Zum Login"),te={class:"abschnitt"},oe=Object(n["i"])("Foto hochladenüñº"),ne={key:2,class:"abschnitt"},ce=Object(n["i"])("Zur Fotowand"),re=Object(n["i"])("Alle Fotos"),se={key:3,class:"abschnitt"},ae=Object(n["i"])("User hinzuf√ºgen");function ie(e,t,o,c,r,s){const a=Object(n["C"])("btn"),i=Object(n["C"])("centeredDiv");return Object(n["u"])(),Object(n["e"])(i,null,{default:Object(n["J"])(()=>[Object(n["h"])("div",V,[e.$store.getters.isLoggedIn?(Object(n["u"])(),Object(n["g"])("div",Z,[Object(n["h"])("span",null,"Eingeloggt als: "+Object(n["E"])(e.$store.state.userProfile.email),1),Object(n["j"])(a,{onClick:s.logOut},{default:Object(n["J"])(()=>[Q]),_:1},8,["onClick"])])):(Object(n["u"])(),Object(n["g"])("div",X,[Y,Object(n["j"])(a,{onClick:e.$router.push.bind(this,{name:"Login"})},{default:Object(n["J"])(()=>[ee]),_:1},8,["onClick"])])),Object(n["h"])("div",te,[Object(n["j"])(a,{onClick:e.$router.push.bind(this,{name:"Photo Upload"})},{default:Object(n["J"])(()=>[oe]),_:1},8,["onClick"])]),e.$store.getters.isLoggedIn?(Object(n["u"])(),Object(n["g"])("div",ne,[Object(n["j"])(a,{onClick:e.$router.push.bind(this,{name:"Slideshow"})},{default:Object(n["J"])(()=>[ce]),_:1},8,["onClick"]),Object(n["j"])(a,{onClick:e.$router.push.bind(this,{name:"Photo List"})},{default:Object(n["J"])(()=>[re]),_:1},8,["onClick"])])):Object(n["f"])("",!0),e.$store.getters.hasAdminAccess?(Object(n["u"])(),Object(n["g"])("div",se,[Object(n["j"])(a,{onClick:e.$router.push.bind(this,{name:"User List"})},{default:Object(n["J"])(()=>[ae]),_:1},8,["onClick"])])):Object(n["f"])("",!0)])]),_:1})}var de={name:"Home",components:{btn:F["a"],centeredDiv:z["a"]},methods:{async logOut(){await this.$store.dispatch("logOut")}}};o("5b01");const le=h()(de,[["render",ie],["__scopeId","data-v-5b25c5d1"]]);var ue=le;const pe=[{path:"/login",name:"Login",component:W},{path:"/password-recovery",name:"PasswordRecovery",component:()=>o.e("password-recovery").then(o.bind(null,"05eb"))},{path:"/admin",redirect:"admin/users/list",component:J,children:[{name:"User List",path:"users/list",component:()=>o.e("admin/allPhotos").then(o.bind(null,"9f1a"))},{name:"Create User",path:"users/create",component:()=>o.e("admin-usercreate").then(o.bind(null,"1513"))}]},{path:"/protected",redirect:"/protected/slideshow",component:A,children:[{name:"Slideshow",path:"/protected/slideshow",component:()=>o.e("protected/Slideshow").then(o.bind(null,"a0f0"))},{name:"Photo List",path:"/protected/photolist",component:()=>o.e("protected/Photo List").then(o.bind(null,"cc00"))}]},{path:"/",name:"Home",component:ue},{path:"/upload",name:"Photo Upload",component:()=>o.e("UploadPhoto").then(o.bind(null,"2679"))}],be=Object(y["a"])({history:Object(y["b"])("/"),routes:pe});var me=be;P["b"].interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),Object(n["d"])(w).use(I).use(me).mount("#app")},"59fb":function(e,t,o){"use strict";var n=o("7a23");const c={class:"outerWrap"},r={class:"innerWrap"};function s(e,t,o,s,a,i){return Object(n["u"])(),Object(n["g"])("div",c,[Object(n["h"])("div",r,[Object(n["B"])(e.$slots,"default",{},void 0,!0)])])}var a={},i=(o("3ebb"),o("6b0d")),d=o.n(i);const l=d()(a,[["render",s],["__scopeId","data-v-37bdbca8"]]);t["a"]=l},"5b01":function(e,t,o){"use strict";o("d162")},6911:function(e,t,o){},8493:function(e,t,o){},"8c89":function(e,t,o){"use strict";o.d(t,"b",(function(){return s})),o.d(t,"a",(function(){return a}));const n="production";let c="",r="";"production"===n?(c="https://maurer-rautenberg.de/api/v1",r="wss://maurer-rautenberg.de/ws"):"staging"===n?(c="https:///api/v1",r="wss:///ws"):(c="http://127.0.0.1:8000/api/v1",r="ws://127.0.0.1:8000/ws");const s=r,a=c},b963:function(e,t,o){"use strict";o("6911")},cea7:function(e,t,o){},d162:function(e,t,o){},e66e:function(e,t,o){"use strict";o("cea7")},eb6b:function(e,t,o){"use strict";o("1a20")}});
//# sourceMappingURL=app.4d79522b.js.map